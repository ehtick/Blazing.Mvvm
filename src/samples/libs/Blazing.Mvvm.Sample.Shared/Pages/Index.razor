@page "/"
@inherits MvvmComponentBase<SampleAppInfoViewModel>

<PageTitle>Blazing.Mvvm Server Sample Application</PageTitle>

<div class="text-center mb-5">
    <h1 class="display-4">🔥 Blazing.Mvvm</h1>
    <p class="lead">A comprehensive MVVM framework for Blazor & MAUI Hybrid applications</p>
</div>

<div class="alert alert-primary mb-4" role="alert">
    <h4 class="alert-heading"><span class="bi bi-info-circle"></span> Welcome to the Sample Application</h4>
    <p>
        This application demonstrates the key features of the <strong>Blazing.Mvvm</strong> framework,
        which brings the power of the Model-View-ViewModel (MVVM) pattern to Blazor with seamless
        integration of CommunityToolkit.Mvvm.
    </p>
    <hr />
    <p class="mb-0">
        <span class="bi bi-box-arrow-up-right"></span>
        Explore the samples below to see how Blazing.Mvvm simplifies Blazor development with type-safe navigation,
        command patterns, messaging, and validation.
    </p>
</div>

<div class="row g-4 mb-4">
    <div class="col-md-6">
        <div class="card h-100">
            <div class="card-body">
                <h5 class="card-title"><span class="bi bi-gear-fill text-primary"></span> Core Features</h5>
                <ul class="mb-0">
                    <li><strong>MVVM Pattern:</strong> Clean separation of concerns with ViewModels</li>
                    <li><strong>Lifecycle Integration:</strong> OnInitialized, OnParametersSet, OnAfterRender hooks</li>
                    <li><strong>Property Change Notification:</strong> Automatic UI updates via INotifyPropertyChanged</li>
                    <li><strong>Dependency Injection:</strong> Full DI support for ViewModels and services</li>
                    <li><strong>Disposable ViewModels:</strong> Proper resource cleanup and lifecycle management</li>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card h-100">
            <div class="card-body">
                <h5 class="card-title"><span class="bi bi-toolkit text-success"></span> CommunityToolkit Integration</h5>
                <ul class="mb-0">
                    <li><strong>ObservableProperty:</strong> Source generators for property change notification</li>
                    <li><strong>RelayCommand:</strong> ICommand implementation with CanExecute support</li>
                    <li><strong>ObservableValidator:</strong> Built-in validation with data annotations</li>
                    <li><strong>IMessenger:</strong> Loosely-coupled component communication</li>
                    <li><strong>AsyncRelayCommand:</strong> Async operations with IsRunning state</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<h2 class="mb-3"><span class="bi bi-compass"></span> Sample Pages Guide</h2>

<div class="accordion mb-4" id="samplesAccordion">
    <div class="accordion-item">
        <h2 class="accordion-header">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseCommands">
                <span class="bi bi-lightning me-2"></span> RelayCommands
            </button>
        </h2>
        <div id="collapseCommands" class="accordion-collapse collapse show" data-bs-parent="#samplesAccordion">
            <div class="accordion-body">
                <p><strong>Demonstrates:</strong> Command pattern with traditional, manual, and automated approaches</p>
                <ul class="small">
                    <li>Traditional @@onclick event handlers vs RelayCommand</li>
                    <li>Manual button + command binding</li>
                    <li>MvvmButton component with automatic state management</li>
                    <li>Synchronous and asynchronous command execution</li>
                    <li>CanExecute for button enable/disable logic</li>
                </ul>
                <button type="button" class="btn btn-sm btn-primary" @onclick="@(() => ViewModel.NavigationCommand.Execute("relaycommands"))">
                    <span class="bi bi-arrow-right"></span> View Sample
                </button>
            </div>
        </div>
    </div>

    <div class="accordion-item">
        <h2 class="accordion-header">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseNavigation">
                <span class="bi bi-signpost-2 me-2"></span> Navigation Samples
            </button>
        </h2>
        <div id="collapseNavigation" class="accordion-collapse collapse" data-bs-parent="#samplesAccordion">
            <div class="accordion-body">
                <p><strong>Demonstrates:</strong> Type-safe and keyed navigation with IMvvmNavigationManager</p>
                <ul class="small">
                    <li><strong>Users:</strong> Master-detail navigation with route parameters</li>
                    <li><strong>Test Navigation:</strong> Interface-based type-safe navigation</li>
                    <li><strong>Keyed Navigation:</strong> String key-based navigation for runtime flexibility</li>
                    <li>Passing route parameters and query strings</li>
                    <li>ViewParameter binding from URLs</li>
                    <li>Breadcrumb navigation patterns</li>
                </ul>
                <div class="d-flex gap-2">
                    <button type="button" class="btn btn-sm btn-primary" @onclick="@(() => ViewModel.NavigationCommand.Execute("users"))">
                        <span class="bi bi-people"></span> Users
                    </button>
                    <button type="button" class="btn btn-sm btn-secondary" @onclick="@(() => ViewModel.NavigationCommand.Execute("test"))">
                        <span class="bi bi-calculator"></span> Test
                    </button>
                    <button type="button" class="btn btn-sm btn-secondary" @onclick="@(() => ViewModel.NavigationCommand.Execute("keyedtest"))">
                        <span class="bi bi-key"></span> Keyed
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="accordion-item">
        <h2 class="accordion-header">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseMessaging">
                <span class="bi bi-chat-dots me-2"></span> Messaging
            </button>
        </h2>
        <div id="collapseMessaging" class="accordion-collapse collapse" data-bs-parent="#samplesAccordion">
            <div class="accordion-body">
                <p><strong>Demonstrates:</strong> Loosely-coupled component communication using IMessenger</p>
                <ul class="small">
                    <li>RecipientViewModelBase for message handling</li>
                    <li>IRecipient&lt;TMessage&gt; interface for type-safe messages</li>
                    <li>Messenger.Send() for broadcasting</li>
                    <li>Bi-directional component updates</li>
                    <li>Parent-to-children message broadcasting</li>
                    <li>Real-time ASCII ↔ Hex conversion</li>
                </ul>
                <button type="button" class="btn btn-sm btn-primary" @onclick="@(() => ViewModel.NavigationCommand.Execute("hextranslate"))">
                    <span class="bi bi-calculator"></span> Hex Translate
                </button>
            </div>
        </div>
    </div>

    <div class="accordion-item">
        <h2 class="accordion-header">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseValidation">
                <span class="bi bi-check-circle me-2"></span> Validation
            </button>
        </h2>
        <div id="collapseValidation" class="accordion-collapse collapse" data-bs-parent="#samplesAccordion">
            <div class="accordion-body">
                <p><strong>Demonstrates:</strong> Form validation</p>
                <ul class="small">
                    <li>Data annotation attributes ([Required], [EmailAddress], [Phone])</li>
                    <li>MvvmObservableValidator component</li>
                    <li>ValidationSummary and ValidationMessage components</li>
                    <li>HasErrors property for form state</li>
                    <li>Automatic UI updates on validation changes</li>
                    <li>Command integration with validation state</li>
                </ul>
                <button type="button" class="btn btn-sm btn-primary" @onclick="@(() => ViewModel.NavigationCommand.Execute("form"))">
                    <span class="bi bi-folder"></span> Form Sample
                </button>
            </div>
        </div>
    </div>

    <div class="accordion-item">
        <h2 class="accordion-header">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseData">
                <span class="bi bi-table me-2"></span> Data & Services
            </button>
        </h2>
        <div id="collapseData" class="accordion-collapse collapse" data-bs-parent="#samplesAccordion">
            <div class="accordion-body">
                <p><strong>Demonstrates:</strong> Async data loading with service integration</p>
                <ul class="small">
                    <li>Service injection into ViewModels</li>
                    <li>Async data fetching in OnInitializedAsync</li>
                    <li>Loading state management</li>
                    <li>HttpClient integration for API calls</li>
                    <li>Observable collections for dynamic data</li>
                </ul>
                <button type="button" class="btn btn-sm btn-primary" @onclick="@(() => ViewModel.NavigationCommand.Execute("fetchdata"))">
                    <span class="bi bi-list-ul"></span> Fetch Data
                </button>
            </div>
        </div>
    </div>
</div>

<div class="row g-4 mb-4">
    <div class="col-md-4">
        <div class="card bg-light h-100">
            <div class="card-body text-center">
                <span class="bi bi-github display-4 text-primary"></span>
                <h5 class="card-title mt-3">Source Code</h5>
                <p class="card-text small">View the complete source code and contribute on GitHub</p>
                <a href="https://github.com/gragra33/Blazing.Mvvm" target="_blank" class="btn btn-outline-primary btn-sm">
                    <span class="bi bi-box-arrow-up-right"></span> GitHub Repository
                </a>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card bg-light h-100">
            <div class="card-body text-center">
                <span class="bi bi-book display-4 text-success"></span>
                <h5 class="card-title mt-3">Documentation</h5>
                <p class="card-text small">Learn more about implementing MVVM in Blazor applications</p>
                <a href="https://github.com/gragra33/Blazing.Mvvm/blob/master/readme.md" target="_blank" class="btn btn-outline-success btn-sm">
                    <span class="bi bi-box-arrow-up-right"></span> Read the Docs
                </a>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card bg-light h-100">
            <div class="card-body text-center">
                <span class="bi bi-box-seam display-4 text-info"></span>
                <h5 class="card-title mt-3">NuGet Package</h5>
                <p class="card-text small">Install Blazing.Mvvm in your own Blazor projects</p>
                <a href="https://www.nuget.org/packages/Blazing.Mvvm" target="_blank" class="btn btn-outline-info btn-sm">
                    <span class="bi bi-box-arrow-up-right"></span> View on NuGet
                </a>
            </div>
        </div>
    </div>
</div>

<div class="alert alert-secondary">
    <h5><span class="bi bi-lightbulb"></span> Getting Started</h5>
    <p class="mb-2">To use Blazing.Mvvm in your own project:</p>
    <ol class="mb-0">
        <li>Install the NuGet package: <code>dotnet add package Blazing.Mvvm</code></li>
        <li>Create ViewModels inheriting from <code>ViewModelBase</code> or <code>ValidatorViewModelBase</code></li>
        <li>Use <code>MvvmComponentBase&lt;TViewModel&gt;</code> in your Razor components</li>
        <li>Leverage CommunityToolkit.Mvvm attributes: <code>[ObservableProperty]</code>, <code>[RelayCommand]</code></li>
        <li>Navigate using <code>IMvvmNavigationManager.NavigateTo&lt;TViewModel&gt;()</code></li>
    </ol>
</div>

